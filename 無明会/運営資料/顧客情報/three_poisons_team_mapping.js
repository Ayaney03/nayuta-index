// 三毒チーム割り振りマッピングデータ
const threePoisonsTeamMapping = [
    '貪欲',   // M001 藤澤秀彰
    '瞋恚',   // M002 鈴木裕介
    '愚痴',   // M003 福井康大
    '',      // M004 俵健太郎 - 空欄
    '愚痴',   // M005 進藤勇輝
    '',      // M006 佐藤諒駿 - 空欄
    '瞋恚',   // M007 杉平涼
    '',      // M008 松本和久 - 空欄
    '',      // M009 松田陽平 - 空欄
    '貪欲',   // M010 井上純也
    '',      // M011 根塚陽己 - 空欄
    '愚痴',   // M012 藤原綜太郎
    '',      // M013 石島秀峰 - 空欄
    '',      // M014 佐藤亜美 - 空欄
    '',      // M015 塚本真伍 - 空欄
    '',      // M016 湊翔太郎 - 空欄
    '',      // M017 鈴木菜摘 - 空欄
    'なし',   // M018 松島徹
    '',      // M019 粟津律子 - 空欄
    '貪欲',   // M020 榎本高也
    'なし',   // M021 石垣吉規
    '',      // M022 ブル - 空欄
    '瞋恚',   // M023 鈴木康太
    '',      // M024 奥村拓哉 - 空欄
    '',      // M025 池本湊了汰 - 空欄
    '',      // M026 松本竜季 - 空欄
    '瞋恚',   // M027 西島颯人
    'なし',   // M028 山縣誠二
    '',      // M029 綿貫桂太 - 空欄
    'なし',   // M030 清水暁
    '',      // M031 中村意央里 - 空欄
    '',      // M032 島守勇次 - 空欄
    '',      // M033 千吉良俊充 - 空欄
    '',      // M034 岩下未誉子 - 空欄
    '',      // M035 安田滉一 - 空欄
    '',      // M036 真木智之 - 空欄
    '',      // M037 吉嵜俊一郎 - 空欄
    '',      // M038 今井一真 - 空欄
    '',      // M039 平野理絵 - 空欄
    '',      // M040 内田泰文 - 空欄
    '愚痴',   // M041 増田凌一
    '',      // M042 新保友望奈 - 空欄
    '',      // M043 市川佳奈 - 空欄
    '',      // M044 渡邉智大 - 空欄
    '愚痴',   // M045 泉田祐輝
    '',      // M046 永井克幸 - 空欄
    '',      // M047 茂木一幸 - 空欄
    '',      // M048 松田圭右 - 空欄
    '',      // M049 松村遼河 - 空欄
    '愚痴',   // M050 平岩遼志
    '',      // M051 佐藤一気 - 空欄
    '愚痴',   // M052 照井紀臣
    '貪欲',   // M053 坂詰宣人
    '貪欲',   // M054 中悠太
    '瞋恚',   // M055 小林千泰
    '',      // M056 廣田一敬 - 空欄
    '瞋恚',   // M057 鈴木智弘
    '瞋恚',   // M058 小島啓輔
    '愚痴',   // M059 尾崎勇哉
    '',      // M060 佐々木透 - 空欄
    '',      // M061 小林和貴 - 空欄
    '愚痴',   // M062 日高悠河
    '瞋恚',   // M063 江口達宏
    '貪欲',   // M064 東出教若
    '貪欲',   // M065 出田竜也
    '',      // M066 長田一 - 空欄
    '貪欲',   // M067 市橋慎士
    '瞋恚',   // M068 今井奎介
    '',      // M069 中西航平 - 空欄
    '',      // M070 熊谷瑞奈美 - 空欄
    '瞋恚',   // M071 内野真子
    '愚痴',   // M072 稲垣真裕
    '貪欲',   // M073 清田宇宙
    '愚痴',   // M074 猪野倫哉
    '瞋恚',   // M075 松垣友
    '',      // M076 篠崎弘多 - 空欄
    '',      // M077 市村智 - 空欄
    'なし',   // M078 今野大輔
    '',      // M079 巾崎由紀子 - 空欄
    '',      // M080 籾山銀河 - 空欄
    '',      // M081 坂之上颯人 - 空欄
    '',      // M082 氏家威吹 - 空欄
    '貪欲',   // M083 黒柳朱音
    '',      // M084 国安あずみ - 空欄
    '',      // M085 阪本巳玖也 - 空欄
    '',      // M086 坂本研太朗 - 空欄
    '貪欲',   // M087 藤井徹
    '瞋恚',   // M088 吉岡佑弥
    '瞋恚',   // M089 佐藤恭平
    'なし',   // M090 小渕桃子
    '',      // M091 森岡裕之 - 空欄
    '貪欲',   // M092 遠藤瑛太
    '瞋恚',   // M093 亀井悠
    '',      // M094 伊藤英哉 - 空欄
    '貪欲',   // M095 小杉沙里衣
    '瞋恚',   // M096 薄田京
    '',      // M097 淺沼佳那子 - 空欄
    '',      // M098 山田大将 - 空欄
    '貪欲',   // M099 永野福三
    '愚痴',   // M100 中根滉介
    '',      // M101 山田剛 - 空欄
    '瞋恚',   // M102 田原璃音
    '愚痴',   // M103 淺利勇斗
    '愚痴',   // M104 片山裕子
    '',      // M105 水林麻里恵 - 空欄
    '',      // M106 榎本知佳 - 空欄
    '瞋恚',   // M107 畠田はな
    '',      // M108 上村徹雄 - 空欄
    '',      // M109 渡邊敦子 - 空欄
    '',      // M110 伊藤奏衣 - 空欄
    '',      // その他1 - 空欄
    '',      // その他2 - 空欄
    '',      // その他3 - 空欄
];

// 三毒チームの色を定義
const threePoisonsColors = {
    '貪欲': { bg: '#fff3cd', color: '#856404', border: '#ffc107' }, // 黄色
    '瞋恚': { bg: '#f8d7da', color: '#721c24', border: '#dc3545' }, // 赤
    '愚痴': { bg: '#d4edda', color: '#155724', border: '#28a745' }, // 緑
    'なし': { bg: '#e9ecef', color: '#6c757d', border: '#6c757d' }, // グレー
    '': { bg: 'transparent', color: '#999', border: 'transparent' }  // 未設定
};

// メンバーデータベースに三毒チーム情報を追加する関数
function updateMembersWithThreePoisonsTeam(membersDatabase) {
    return membersDatabase.map((member, index) => {
        const team = threePoisonsTeamMapping[index] || '';
        const teamColors = threePoisonsColors[team] || threePoisonsColors[''];
        
        return {
            ...member,
            threePoisonsTeam: team,
            teamColors: teamColors,
            // チーム表示用のラベル
            teamLabel: team === 'なし' ? 'チーム未所属' : 
                      team === '' ? '未設定' : 
                      `${team}チーム`
        };
    });
}

// 三毒チーム別の統計を計算する関数
function calculateThreePoisonsStats(membersDatabase) {
    const stats = {
        貪欲: { count: 0, active: 0 },
        瞋恚: { count: 0, active: 0 },
        愚痴: { count: 0, active: 0 },
        なし: { count: 0, active: 0 },
        未設定: { count: 0, active: 0 }
    };

    membersDatabase.forEach(member => {
        const team = member.threePoisonsTeam === '' ? '未設定' : 
                    member.threePoisonsTeam === 'なし' ? 'なし' : 
                    member.threePoisonsTeam;
        
        if (stats[team]) {
            stats[team].count++;
            // アクティブメンバー（年間+通常）の場合
            if (member.currentStatus === '年間' || member.currentStatus === '通常') {
                stats[team].active++;
            }
        }
    });

    return stats;
}

// チーム別のメンバーリストを取得する関数
function getMembersByTeam(membersDatabase, team) {
    return membersDatabase.filter(member => {
        if (team === '未設定') return member.threePoisonsTeam === '';
        if (team === 'なし') return member.threePoisonsTeam === 'なし';
        return member.threePoisonsTeam === team;
    });
}

console.log('Three Poisons team mapping loaded. Use updateMembersWithThreePoisonsTeam() to apply.');
