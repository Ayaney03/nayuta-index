# 脱スマホ瞑想プログラム提案ページ - 自動更新システム

## 🎯 概要

HTMLファイルの最終更新日を自動で更新し、Google Driveに自動アップロード/更新するシステムを構築しました。

## 📅 追加された機能

### 1. 最終更新日表示
- **位置**: ページ右下に固定表示
- **スタイル**: 半透明の黒背景に白文字
- **形式**: 📅 最終更新: 2025年09月01日 23:25

### 2. 自動更新スクリプト
- **ファイル**: `/Users/ayakamizuno/cursor/google_drive_api/auto_update_html.py`
- **機能**: 
  - HTMLファイル内の更新日を現在日時に自動更新
  - Google Drive上の既存ファイルを検索・更新
  - 新規ファイルの場合は自動アップロード・共有設定
  - なゆたさんへの共有メッセージ自動生成

## 🚀 使用方法

### 基本的な使い方

```bash
# Google Drive APIディレクトリに移動
cd /Users/ayakamizuno/cursor/google_drive_api

# 自動更新・アップロード実行
python auto_update_html.py
```

### 手動でファイル指定する場合

```bash
python auto_update_html.py /path/to/your/file.html
```

## 📋 実行される処理

1. **更新日の自動更新**
   - HTMLファイル内の `📅 最終更新: YYYY年MM月DD日 HH:MM` を現在日時に更新

2. **Google Drive連携**
   - 既存ファイルがある場合：内容を更新
   - 新規ファイルの場合：アップロード + 共有設定

3. **結果表示**
   - アップロード結果の詳細表示
   - なゆたさんへの共有メッセージ生成
   - 閲覧用リンクをクリップボードにコピー

## 📤 出力例

```
🚀 自動更新・アップロードツール
📁 対象ファイル: /Users/ayakamizuno/cursor/天郷事業/01_瞑想事業/脱スマホ瞑想プログラム_商品提案.html
✅ 最終更新日を更新しました: 2025年09月01日 23:25
🔗 Google Drive APIに接続中...
🔍 既存ファイルを発見: 脱スマホ瞑想プログラム_商品提案.html (ID: 1abc...)
🔄 既存ファイルを更新中: 脱スマホ瞑想プログラム_商品提案.html

============================================================
🎉 更新完了！
============================================================
📄 ファイル名: 脱スマホ瞑想プログラム_商品提案.html
🆔 ファイルID: 1abc...
👀 閲覧用リンク: https://drive.google.com/file/d/1abc.../view
⬇️  ダウンロード用リンク: https://drive.google.com/uc?id=1abc...
🕐 更新日時: 2025-09-01T14:25:00.000Z
============================================================

📋 なゆたさんへの共有メッセージ（2025年09月01日 23:25 更新）:
------------------------------------------------------------
なゆたさん、お疲れさまです！

脱スマホ瞑想プログラムの商品提案ページを更新しました。
以下のリンクからご確認ください：

📄 提案ページ: https://drive.google.com/file/d/1abc.../view

【閲覧方法】
1. 上記リンクをクリック
2. 「ダウンロード」ボタンでHTMLファイルをダウンロード
3. ダウンロードしたファイルをブラウザで開いて閲覧

💡 ページ右下に最終更新日が表示されています。
   今後の変更も自動で反映されます。

ご質問やご要望がございましたら、いつでもお声がけください！

あやねえ
------------------------------------------------------------

📋 閲覧用リンクをクリップボードにコピーしました！
```

## 🔧 カスタマイズ

### 更新日の表示位置を変更したい場合

HTMLファイル内の `.last-updated` CSSクラスを編集：

```css
.last-updated {
    position: fixed;
    bottom: 10px;    /* 下からの距離 */
    right: 10px;     /* 右からの距離 */
    /* left: 10px; に変更すると左下に表示 */
}
```

### 日付フォーマットを変更したい場合

`auto_update_html.py` の `update_last_modified_date` 関数内：

```python
# 現在の形式: 2025年09月01日 23:25
current_time = datetime.now().strftime('%Y年%m月%d日 %H:%M')

# 英語形式に変更する場合
current_time = datetime.now().strftime('%Y-%m-%d %H:%M')
```

## 🎯 ワークフロー例

1. **HTMLファイルを編集**
2. **自動更新スクリプト実行**: `python auto_update_html.py`
3. **生成されたリンクをなゆたさんに送信**
4. **なゆたさんが最新版を確認**

これで、いつでも最新の提案ページを共有できます！

## 🔒 セキュリティ

- Google Drive APIの認証情報は `token.pickle` に安全に保存
- 共有設定は「リンクを知っている全員が閲覧可」に自動設定
- ファイルの編集権限は付与されません（閲覧のみ）
