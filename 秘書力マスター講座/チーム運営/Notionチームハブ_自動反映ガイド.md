# Notionチームハブ 自動反映システム 完全ガイド

## 🎯 概要
あやねえがCursorで編集したファイルが、自動的にNotionのチーム共有ページに反映されるシステムです。マーケティング施策やレッスンコンテンツの進捗を、チームメンバーがリアルタイムで確認できます。

## ✨ 主な機能

### 🏠 チームハブダッシュボード
- **📖 レッスンコンテンツ管理**: 各章の進捗状況を一覧表示
- **📢 マーケティング施策管理**: LINE配信、SNS投稿、ローンチ計画の状況
- **📋 チームタスク管理**: 担当者別のタスク進捗
- **🔄 リアルタイム更新**: ファイル編集時に即座に反映

### 📊 自動データ抽出
- **ファイル内容分析**: タイトル、ステータス、進捗を自動判定
- **カテゴリ分類**: フォルダ構造に基づく自動分類
- **進捗計算**: ファイルサイズや内容から進捗率を推定

## 🚀 セットアップ手順

### Step 1: 基本環境準備
```bash
cd /Users/ayakamizuno/cursor/google_drive_api

# 必要なライブラリをインストール
pip install -r requirements.txt

# Notion認証を設定（既に完了している場合はスキップ）
python setup_notion_sync.py
```

### Step 2: チームダッシュボード作成
```bash
# ワンクリックセットアップを実行
python setup_team_dashboard.py
```

**セットアップ中の操作：**
1. Notionで新しいページを作成
2. ページタイトル: `秘書力マスター講座 プロジェクト管理`
3. 作成したページのURLをコピー
4. スクリプトにURLを入力

### Step 3: 自動更新システム開始
```bash
# リアルタイム更新を開始
python realtime_dashboard_updater.py

# または、バックグラウンドで実行
nohup python realtime_dashboard_updater.py > dashboard.log 2>&1 &
```

## 📋 作成されるNotionページ構成

### 🏠 メインハブページ
```
📚 秘書力マスター講座 チームハブ
├── 📊 プロジェクト概要
├── 📖 レッスンコンテンツ（データベースビュー）
├── 📢 マーケティング施策（データベースビュー）
└── 📋 チームタスク（データベースビュー）
```

### 📖 レッスンデータベース
| 項目 | 説明 | 自動更新 |
|------|------|----------|
| レッスン名 | ファイルのタイトル（# 見出し） | ✅ |
| 章 | フォルダ名から自動判定 | ✅ |
| ステータス | 未着手/作成中/レビュー中/完成 | ✅ |
| 進捗 | ファイル内容から推定（0-100%） | ✅ |
| 担当者 | 手動設定 | ❌ |
| 期限 | 手動設定 | ❌ |
| ファイルパス | 相対パス | ✅ |

### 📢 マーケティングデータベース
| 項目 | 説明 | 自動更新 |
|------|------|----------|
| 施策名 | ファイルのタイトル | ✅ |
| カテゴリ | LINE配信/SNS投稿/ローンチ計画等 | ✅ |
| ステータス | 企画中/制作中/実行中/完了 | ✅ |
| 優先度 | ファイル内容から推定 | ✅ |
| 担当者 | 手動設定 | ❌ |
| 実施日 | 手動設定 | ❌ |

## 🔄 自動反映の仕組み

### ファイル変更検知
```
1. あやねえがCursorでファイルを編集・保存
2. ファイル監視システムが変更を検知
3. 3秒後に自動でNotionデータベースを更新
4. チームメンバーがNotionで最新状況を確認
```

### ステータス自動判定ロジック
```python
# レッスンファイルの場合
if "TODO" in content or "作成中" in content:
    status = "作成中"
elif "レビュー" in content or "確認" in content:
    status = "レビュー中"
elif len(content.strip()) < 100:
    status = "未着手"
else:
    status = "完成"

# マーケティングファイルの場合
if "完了" in content or "実施済み" in content:
    status = "完了"
elif "実行中" in content or "配信中" in content:
    status = "実行中"
# ... 以下同様
```

### 進捗率計算
```python
# ファイル内容とステータスから推定
progress_map = {
    "未着手": 0,
    "作成中": 50,
    "レビュー中": 80,
    "完成": 100
}
```

## 📊 チームメンバーの使い方

### 1. 日常的な確認
```
1. Notionのメインハブページを開く
2. 各データベースで最新状況を確認
3. 必要に応じてコメントやタスクを追加
```

### 2. フィルタリング・ソート
```
レッスンデータベース:
- 章別でグループ化
- ステータス別でフィルタ
- 進捗順でソート

マーケティングデータベース:
- カテゴリ別でグループ化
- 優先度順でソート
- 実施日でフィルタ
```

### 3. 手動項目の設定
```
自動更新されない項目:
- 担当者の割り当て
- 期限の設定
- 詳細なメモ
- 関連ファイルのリンク
```

## 🔧 カスタマイズ設定

### 更新間隔の調整
```python
# realtime_dashboard_updater.py で設定
self.periodic_update_interval = 300  # 5分ごとの定期更新
```

### 監視対象フォルダの追加
```python
# 監視対象ディレクトリを追加
monitor_dirs = [
    self.workspace_path / "レッスン（講座コンテンツ）",
    self.workspace_path / "マーケティング",
    self.workspace_path / "チーム運営",
    self.workspace_path / "新しいフォルダ"  # 追加
]
```

### ステータス判定ルールの変更
```python
# notion_dashboard_manager.py の _extract_lesson_info() で調整
if "進行中" in content:  # 新しいキーワードを追加
    status = "作成中"
```

## 🛠️ 運用・管理

### 定期メンテナンス
```bash
# 週次実行推奨
./update_dashboard.sh

# 月次実行推奨
./setup_cron.sh  # 自動更新の設定確認
```

### ログ確認
```bash
# リアルタイム更新のログ
tail -f dashboard.log

# システム状態確認
python realtime_dashboard_updater.py
> status
```

### バックアップ
```bash
# Notionデータベース設定のバックアップ
cp .notion_dashboard_config.json .notion_dashboard_config.json.backup
```

## 📱 モバイル対応

### スマートフォンでの確認
```
Notionモバイルアプリで:
1. チームハブページをブックマーク
2. プッシュ通知を有効化
3. オフライン同期を設定
```

### 外出先での確認
```
主要な確認項目:
- 今日のタスク進捗
- 緊急度の高いマーケティング施策
- レッスン制作の遅れ
```

## 🔔 通知設定

### Notion内通知
```
1. 各データベースで「フォロー」を有効化
2. 更新時の通知設定を調整
3. コメント・メンション通知を設定
```

### Slack連携（オプション）
```python
# Slack Webhookを使用した通知
webhook_url = "https://hooks.slack.com/services/..."

def send_slack_notification(message):
    requests.post(webhook_url, json={"text": message})
```

## ❓ よくある質問

### Q: 自動更新が動作しない
```
A: 確認事項
1. NOTION_TOKEN が正しく設定されているか
2. Notionページに Integration が接続されているか
3. realtime_dashboard_updater.py が実行中か
4. ファイルパスが正しいか
```

### Q: ステータスが正しく判定されない
```
A: 対策
1. ファイル内に判定用キーワードを追加
2. 手動でステータスを修正
3. 判定ルールをカスタマイズ
```

### Q: データベースが重複している
```
A: 解決方法
1. 古いデータベースを削除
2. setup_team_dashboard.py を再実行
3. 設定ファイルをリセット
```

## 🎯 活用例

### 週次MTGでの使用
```
1. メインハブページを画面共有
2. 各データベースの進捗を確認
3. 遅れているタスクを特定
4. 次週の優先事項を決定
```

### 個人作業での活用
```
あやねえ:
1. Cursorでファイルを編集
2. 保存と同時にNotionが更新
3. 進捗状況を視覚的に確認
4. 次の作業項目を決定
```

### チームメンバーの活用
```
1. 朝一でハブページを確認
2. 担当タスクの状況をチェック
3. 必要に応じてコメントを追加
4. 完了したタスクを手動更新
```

## 📈 効果測定

### KPI例
```
- タスク完了率の向上
- 情報共有の効率化
- MTG時間の短縮
- プロジェクト透明性の向上
```

### 改善サイクル
```
月次レビュー:
1. 使用状況の分析
2. チームフィードバックの収集
3. 自動判定ルールの調整
4. 新機能の検討
```

---
**作成日**: 2025年1月27日  
**更新日**: 2025年1月27日  
**担当者**: あやねえ  
**バージョン**: 1.0

## 🚀 今すぐ始める

```bash
# 1. セットアップ実行
python setup_team_dashboard.py

# 2. リアルタイム更新開始
python realtime_dashboard_updater.py

# 3. Notionでチームハブページを確認
# 4. チームメンバーを招待
# 5. ファイルを編集して自動反映をテスト
```

これで、あやねえの作業がリアルタイムでチーム全体に共有される環境が完成します！🎉
